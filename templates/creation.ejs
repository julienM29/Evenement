<%- include('./shared/header.ejs', {title: 'Bienvenue sur mon blog' })%>
    <div class=" w-100 d-flex justify-content-center" style="background-color: rgb(242, 243, 243);">

    <div class="card mt-2 px-2 w-50">
        <% if (locals.user) {%>
            <form action="" method="post" enctype="multipart/form-data">
                <div class="form-group mb-2">
                    <label class="mb-2" for="titre">Titre de l'évènement</label>
                    <input type="text" class="form-control" name="titre" id="titre">
                </div>
                <div class="form-group mb-2">
                    <label class="mb-2" for="lieu">Lieu</label>
                    <input type="text" class="form-control" name="lieu" id="lieu">
                </div>
                <div class="form-group mb-2">
                    <label class="mb-2" for="description">Description</label>
                    <input type="text" class="form-control" name="description" id="description">
                </div>
                <div class="form-group mb-2">
                    <label class="mb-2" for="motsCles">Mots clés associés à l'évènement</label>
                    <select class="form-select form-select-solid" id="motsCles" name="motsCles[]" multiple="multiple"
                        style="width: 100%" data-hide-search="true">
                        <% for (const mot of motsCles) {%>
                            <option value="<%= mot.id %>">
                                <%=mot.nom %>
                            </option>
                            <% } %>
                    </select>
                </div>
                <div class="form-group mb-2">
                    <label class="mb-2" for="photo">Photo illustrant l'évènement</label>
                    <input type="file" class="form-control" name="photo" id="photo">
                </div>
                <div class="form-group mb-2">
                    <label class="mb-2" for="dateInscription">Date finale d'inscription</label>
                    <input type="datetime-local" class="form-control" name="dateInscription" id="dateInscription">
                </div>
                <div class="form-group mb-2 ">
                    <label class="mb-2" for="dateDebut">Date de début de l'évènement</label>
                    <input type="datetime-local" class="form-control" name="dateDebut" id="dateDebut">
                </div>
                <div class="form-group mb-2 ">
                    <label class="mb-2" for="dateFin">Date de fin de l'évènement</label>
                    <input type="datetime-local" class="form-control" name="dateFin" id="dateFin">
                </div>
                <div class="form-group mb-2 ">
                    <label class="mb-2" for="nbParticipants">Nombres de participants maximum</label>
                    <input type="number" class="form-control" name="nbParticipants" id="nbParticipants">
                </div>
                <div id="imagePreviewContainer">
                    <img id="imagePreview" src="" alt="Prévisualisation de l'image" style="display: none; max-width: 300px;">
                </div>
                <div class="w-100 d-flex justify-content-center">
                    <button class=" mt-3 btn btn-primary mb-3"> Créer l'évènement</button>

                </div>
            </form>
            <% } %>
          
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#motsCles').select2({
            placeholder: "Selectionner des mots clés",
            allowClear: true
        });
    });
    document.getElementById('photo').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const preview = document.getElementById('imagePreview');
            preview.src = e.target.result;
            preview.style.display = 'block';
        }
        reader.readAsDataURL(file);
    }
});
</script>
<%- include('./shared/footer.ejs')%>